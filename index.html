<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Page Needs
  ––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Gabi Steele Thesis Project</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  ––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  ––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Ralway:400,300,600" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Bitter:400,700' rel='stylesheet' type='text/css'> -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Pacifico:400' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Cutive+Mono' rel='stylesheet' type='text/css'>

  <!-- CSS
  ––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css"> -->
  <link rel="stylesheet" href="css/style.css">
  <link href='css/onepage-scroll.css' rel='stylesheet' type='text/css'>
  <link href='css/default.css' rel='stylesheet' type='text/css'>
  <link href='css/style.css' rel='stylesheet' type='text/css'>

  <!-- Favicon
  ––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>

<body>
  
    
    <div class="wrapper">	
	  <div class="main">
	    
      <section class="page1">
       
          
          <!--<div class="image"> -->
          <img src="images/boy.jpg" style="width:100%;height:100%;opacity:0.4;z-index:1;">
          <!--</div>-->
           <div class="page_container">
          <h1><span class="title">the Group Attachment Based Intervention Study:</span>
           <span class="title">A Pragmatic Clinical Trial</span><span class="title">Working to Reduce Child Maltreatment</span><br/><span class="title">in Vulnerable Families</span>
          </h1>.
          </div>

      </section>
	    
	    <section class="page3">
 
          <h1><span class="pagetwo">History of the Group Attachment Based Intervention Study</span></h1>
          <h2>The Group Attachment Based Intervention study was developed jointly by <a class=highlight href="http://www.attachmentresearch.com/">The New School for Social Research Center for Attachment</a> and the <a class=highlight href=https://www.einstein.yu.edu/centers/childrens-evaluation-rehabilitation/clinical-services/specialized-centers.aspx>Einstein Medical Center<a/> in 2006. It’s goal is to break the cycle of child maltreatment in vulnerable and low income families by intervening before the child turns 3 years old.</h2>
	  <img src="images/NewSchool.png">
  	        <img src="images/EinstienHospital.png">
	       <div class="page_container">
	        
  	    </div>
      </section>

         <section class="page2">
        <div class="page_container">
          <h1>What is the Intervention?</h1>
          <h2>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean elementum congue faucibus. Duis luctus ex ultrices, tincidunt purus a, sodales lectus. Vivamus ultrices neque ut turpis elementum, at porta lectus pretium. Nunc non tincidunt purus. Maecenas quis mollis enim. Suspendisse condimentum euismod ipsum sed consequat. Sed sagittis nisi non pellentesque vestibulum.</h2>
      
        </div>
      </section>
      
 <section class="page4">
        <div class="page_container">
         
          <h1>Who Does The Study Target?</h1>




        </div>
      </section>

       <section class="page5">
        <div class="page_container">
          <h1 class="page5title">Examining Parent Child Relationships<br/>Before and After Treatment</h1>
          
          	<input id="slider" type="range" min="2000" max="2011" value="2000" step="1" />
	
          	<span id="range">2000</span>
          
          	<button name="play" id="play">Play</button>
          	
          	<div id="chart"></div>
          	
          	<script src="js/d3.v3.min.js"></script>
          	<script src="https://raw.github.com/fryn/html5slider/gh-pages/html5slider.js"></script>
          	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
          	<script src="js/script.js"></script>
                    
         
      </section>
      
       <section class="page6">
        <div class="page_container">
          <h1>Stacked Bar Charts</h1>
          <form>
            <label><input type="radio" name="mode" value="grouped"> Grouped</label>
            <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
          </form>
<script>


d3.csv("data/stackedBarsData.csv", function(error, data) {

var counter = 0;
var n = 4, // number of layers
    m = data.length, // number of samples per layer
    stack = d3.layout.stack(),
    layers = stack(d3.range(n).map(function() { return bumpLayer(m, n, 0); })),
    yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); }),
    yStackMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y0 + d.y; }); });


    
    console.log("loaded stackedBarsData.csv");
    
    data.forEach(function(d) {
        d.date = d.Behavior;
        console.log(d.date);
        d.value = +d.T0;
        console.log(d.value);
    });
    console.log("rows: " + data.length);
    console.log("rows: " + data[0].date);
    m = data.length;

    
    // Inspired by Lee Byron's test data generator.

    function bumpLayer(num, n, o) {
      
      var a = [], i;
      
      if (counter == 0) {
        // T0
        for (i = 0; i < num; ++i) {
          a[i] = data[i].T0;
          console.log(i + "| " + a[i]);
        }
      } 
      
      if (counter == 1) {
        // T1
        for (i = 0; i < num; ++i) {
          a[i] = data[i].T1;
          console.log(i + "| " + a[i]);
        }
      } 
      
      if (counter == 2) {
        // STEP_T0
        for (i = 0; i < num; ++i) {
          a[i] = data[i].STEP_T0;
          console.log(i + "| " + a[i]);
        }
      } 

      if (counter == 3) {
        // T1
        for (i = 0; i < num; ++i) {
          a[i] = data[i].STEP_T1;
          console.log(i + "| " + a[i]);
        }
      } 
      
      
      // else
        
      // for (i = 0; i < num; ++i) a[i] = Math.random();

      counter++;

      return a.map(function(d, i) { return {x: i, y: Math.max(0, d)}; });
    }
    
    
var margin = {top: 40, right: 10, bottom: 20, left: 10},
    width = 2060 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .domain(d3.range(m))
    .rangeRoundBands([0, width], .08);

var y = d3.scale.linear()
    .domain([0, yStackMax])
    .range([height, 0]);

var color = d3.scale.linear()
    .domain([0, n - 1])
    .range(["#e6f3ff", "#00284d"]);

var xAxis = d3.svg.axis()
    .scale(x)
    .tickSize(0)
    .tickPadding(6)
    .orient("bottom");

var svg = d3.select(".page6").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var layer = svg.selectAll(".layer")
    .data(layers)
  .enter().append("g")
    .attr("class", "layer")
    .style("fill", function(d, i) { return color(i); });

var rect = layer.selectAll("rect")
    .data(function(d) { return d; })
  .enter().append("rect")
    .attr("x", function(d) { return x(d.x); })
    .attr("y", height)
    .attr("width", x.rangeBand())
    .attr("height", 0);

rect.transition()
    .delay(function(d, i) { return i * 10; })
    .attr("y", function(d) { return y(d.y0 + d.y); })
    .attr("height", function(d) { return y(d.y0) - y(d.y0 + d.y); });

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

d3.selectAll("input").on("change", change);

var timeout = setTimeout(function() {
  d3.select("input[value=\"grouped\"]").property("checked", true).each(change);
}, 2000);

function change() {
  clearTimeout(timeout);
  if (this.value === "grouped") transitionGrouped();
  else transitionStacked();
}

function transitionGrouped() {
  y.domain([0, yGroupMax]);

  rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("x", function(d, i, j) { return x(d.x) + x.rangeBand() / n * j; })
      .attr("width", x.rangeBand() / n)
    .transition()
      .attr("y", function(d) { return y(d.y); })
      .attr("height", function(d) { return height - y(d.y); });
}

function transitionStacked() {
  y.domain([0, yStackMax]);

  rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("y", function(d) { return y(d.y0 + d.y); })
      .attr("height", function(d) { return y(d.y0) - y(d.y0 + d.y); })
    .transition()
      .attr("x", function(d) { return x(d.x); })
      .attr("width", x.rangeBand());
}


});

</script>
      
        </div>
      </section>
      
      
    </div>
    
  </div>
  

   <script type="text/javascript" src="js/jquery-min.js"></script>
   <script type="text/javascript" src="js/main.js"></script>
   <script type="text/javascript" src="js/onepagescroll.js"></script>

   <script>
   onePageScroll(".main", {
     sectionContainer: "section",
     loop: true,
     responsiveFallback: false
   });
    
  </script>
</body>
</html>